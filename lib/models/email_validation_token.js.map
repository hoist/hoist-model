{"version":3,"sources":["models/email_validation_token.js"],"names":[],"mappings":"AAAA;;AACA,IAAI,WAAW,QAAQ,UAAR,CAAX;AACJ,IAAI,UAAU,QAAQ,yBAAR,CAAV;AACJ,IAAI,aAAa,QAAQ,oBAAR,CAAb;AACJ,IAAI,YAAY,QAAQ,UAAR,CAAZ;AACJ,IAAI,SAAS,SAAS,MAAT;AACb,IAAI,iBAAiB,QAAQ,wBAAR,CAAjB;AACJ,IAAI,SAAS,QAAQ,cAAR,CAAT;;AAEJ,IAAI,6BAA6B,IAAI,MAAJ,CAAW;AAC1C,iBAAe,MAAf;AACA,OAAK;AACH,UAAM,OAAN;AACA,UAAM,EAAN;AACA,aAAS,CAAT;AACA,SAAK,EAAL;GAJF;AAMA,QAAM;AACJ,UAAM,OAAN;AACA,SAAK,WAAL;AACA,cAAU,6BAAV;GAHF;AAKA,SAAO;AACL,UAAM,MAAN;AACA,cAAU,4BAAV;GAFF;AAIA,kBAAgB;AACd,UAAM,MAAN;AACA,WAAO,IAAP;AACA,cAAU,8BAAV;AACA,YAAQ,IAAR;AACA,aAAS,oBAAY;AACnB,aAAO,OAAO,CAAP,EAAP,CADmB;KAAZ;GALX;AASA,iBAAe;AACb,UAAM,IAAN;AACA,aAAS,IAAT;GAFF;AAIA,aAAW;AACT,UAAM,OAAN;AACA,aAAS,KAAT;GAFF;CA9B+B,CAA7B;;AAoCJ,2BAA2B,MAA3B,CAAkC,cAAlC;AACA,2BAA2B,MAA3B,CAAkC,UAAlC;;AAEA,SAAS,KAAT,CAAe,sBAAf,EAAuC,0BAAvC;;AAEA,IAAI,uBAAuB,SAAS,KAAT,CAAe,sBAAf,CAAvB;AACJ,UAAU,YAAV,CAAuB,oBAAvB;AACA,UAAU,YAAV,CAAuB,qBAAqB,SAArB,CAAvB;AACA,QAAQ,IAAR,GAAe,sBAAf;AACA,QAAQ,KAAR,GAAgB,oBAAhB","file":"models/email_validation_token.js","sourcesContent":["'use strict';\nvar mongoose = require('mongoose');\nvar ShortId = require('@hoist/mongoose-shortid');\nvar timestamps = require('mongoose-timestamp');\nvar BBPromise = require('bluebird');\nvar Schema = mongoose.Schema;\nvar mongooseDelete = require('@hoist/mongoose-delete');\nvar keygen = require('keygenerator');\n\nvar EmailValidationTokenSchema = new Schema({\n  schemaVersion: String,\n  _id: {\n    type: ShortId,\n    base: 64,\n    retries: 4,\n    len: 20\n  },\n  user: {\n    type: ShortId,\n    ref: 'HoistUser',\n    required: 'Must belong to a Hoist User'\n  },\n  email: {\n    type: String,\n    required: 'Must have an email address'\n  },\n  activationCode: {\n    type: String,\n    index: true,\n    required: 'Must have an activation code',\n    unique: true,\n    default: function () {\n      return keygen._();\n    }\n  },\n  activatedDate: {\n    type: Date,\n    default: null\n  },\n  activated: {\n    type: Boolean,\n    default: false\n  }\n});\n\nEmailValidationTokenSchema.plugin(mongooseDelete);\nEmailValidationTokenSchema.plugin(timestamps);\n\nmongoose.model('EmailValidationToken', EmailValidationTokenSchema);\n\nvar EmailValidationToken = mongoose.model('EmailValidationToken');\nBBPromise.promisifyAll(EmailValidationToken);\nBBPromise.promisifyAll(EmailValidationToken.prototype);\nexports.name = 'EmailValidationToken';\nexports.model = EmailValidationToken;\n"],"sourceRoot":"/source/"}