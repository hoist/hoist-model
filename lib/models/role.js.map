{"version":3,"sources":["models/role.js"],"names":[],"mappings":"AAAA;;AACA,IAAI,WAAW,QAAQ,UAAR,CAAX;AACJ,IAAI,UAAU,QAAQ,yBAAR,CAAV;AACJ,IAAI,SAAS,SAAS,MAAT;AACb,IAAI,YAAY,QAAQ,UAAR,CAAZ;AACJ,IAAI,aAAa,QAAQ,oBAAR,CAAb;AACJ,IAAI,iBAAiB,QAAQ,wBAAR,CAAjB;;AAEJ,IAAI,eAAe,CAAC,MAAD,EAAS,MAAT,EAAiB,KAAjB,CAAf;;AAEJ,IAAI,aAAa,IAAI,MAAJ,CAAW;AAC1B,iBAAe,MAAf;;AAEA,OAAK;AACH,UAAM,OAAN;AACA,UAAM,EAAN;AACA,aAAS,CAAT;AACA,SAAK,EAAL;GAJF;AAMA,eAAa;AACX,UAAM,OAAN;AACA,SAAK,aAAL;AACA,cAAU,oCAAV;GAHF;AAKA,eAAa;AACX,UAAM,MAAN;AACA,UAAM;AACJ,cAAQ,YAAR;AACA,eAAS,yCAAT;KAFF;AAIA,cAAU,yCAAV;GANF;AAQA,UAAQ,CAAC;AACP,UAAM,MAAN;GADM,CAAR;CAtBe,CAAb;;AA2BJ,WAAW,MAAX,CAAkB,UAAlB;AACA,WAAW,MAAX,CAAkB,cAAlB;;AAEA,SAAS,KAAT,CAAe,MAAf,EAAuB,UAAvB;;AAEA,IAAI,OAAO,SAAS,KAAT,CAAe,MAAf,CAAP;AACJ,UAAU,YAAV,CAAuB,IAAvB;AACA,UAAU,YAAV,CAAuB,KAAK,SAAL,CAAvB;AACA,QAAQ,IAAR,GAAe,MAAf;AACA,QAAQ,KAAR,GAAgB,IAAhB","file":"models/role.js","sourcesContent":["'use strict';\nvar mongoose = require('mongoose');\nvar ShortId = require('@hoist/mongoose-shortid');\nvar Schema = mongoose.Schema;\nvar BBPromise = require('bluebird');\nvar timestamps = require('mongoose-timestamp');\nvar mongooseDelete = require('@hoist/mongoose-delete');\n\nvar environments = ['live', 'test', 'dev'];\n\nvar RoleSchema = new Schema({\n  schemaVersion: String,\n  //the org that owns this application\n  _id: {\n    type: ShortId,\n    base: 64,\n    retries: 4,\n    len: 20\n  },\n  application: {\n    type: ShortId,\n    ref: 'Application',\n    required: 'role must belong to an application'\n  },\n  environment: {\n    type: String,\n    enum: {\n      values: environments,\n      message: 'role must belong to a valid environment'\n    },\n    required: 'role must belong to a valid environment'\n  },\n  claims: [{\n    type: String\n  }]\n});\n\nRoleSchema.plugin(timestamps);\nRoleSchema.plugin(mongooseDelete);\n\nmongoose.model('Role', RoleSchema);\n\nvar Role = mongoose.model('Role');\nBBPromise.promisifyAll(Role);\nBBPromise.promisifyAll(Role.prototype);\nexports.name = 'Role';\nexports.model = Role;\n"],"sourceRoot":"/source/"}