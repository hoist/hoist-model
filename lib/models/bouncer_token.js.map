{"version":3,"sources":["models/bouncer_token.js"],"names":[],"mappings":"AAAA;;AACA,IAAI,WAAW,QAAQ,UAAR,CAAX;AACJ,IAAI,UAAU,QAAQ,yBAAR,CAAV;AACJ,IAAI,aAAa,QAAQ,oBAAR,CAAb;AACJ,IAAI,YAAY,QAAQ,UAAR,CAAZ;AACJ,IAAI,SAAS,SAAS,MAAT;AACb,IAAI,eAAe,CAAC,MAAD,EAAS,MAAT,EAAiB,KAAjB,CAAf;AACJ,IAAI,iBAAiB,QAAQ,wBAAR,CAAjB;AACJ,IAAI,SAAS,QAAQ,cAAR,CAAT;AACJ,IAAI,qBAAqB,IAAI,MAAJ,CAAW;AAClC,iBAAe,MAAf;AACA,OAAK;AACH,UAAM,OAAN;AACA,UAAM,EAAN;AACA,aAAS,CAAT;AACA,SAAK,EAAL;GAJF;AAMA,eAAa;AACX,UAAM,OAAN;AACA,SAAK,aAAL;AACA,WAAO,IAAP;AACA,cAAU,8CAAV;GAJF;AAMA,eAAa;AACX,UAAM,MAAN;AACA,UAAM;AACJ,cAAQ,YAAR;AACA,eAAS,mDAAT;KAFF;AAIA,cAAU,mDAAV;GANF;AAQA,UAAQ,MAAR;AACA,UAAQ,MAAR;AACA,aAAW,MAAX;AACA,gBAAc,MAAd;AACA,iBAAe,MAAf;AACA,qBAAmB,CACjB;AACG,SAAK,KAAL;AACD,UAAM,MAAN;AACA,WAAO,MAAP;GAJe,CAAnB;AAOA,SAAO;AACL,UAAM,OAAO,KAAP,CAAa,KAAb;AACN,aAAS,oBAAY;AACnB,aAAO,EAAP,CADmB;KAAZ;GAFX;AAMA,OAAK;AACH,UAAM,MAAN;AACA,cAAU,IAAV;AACA,aAAS,oBAAY;AACnB,aAAO,OAAO,CAAP,EAAP,CADmB;KAAZ;AAGT,YAAQ,IAAR;GANF;CAxCuB,CAArB;;AAkDJ,mBAAmB,MAAnB,CAA0B,UAA1B;AACA,mBAAmB,MAAnB,CAA0B,cAA1B;AACA,SAAS,KAAT,CAAe,cAAf,EAA+B,kBAA/B;;AAEA,IAAI,eAAe,SAAS,KAAT,CAAe,cAAf,CAAf;AACJ,UAAU,YAAV,CAAuB,YAAvB;AACA,UAAU,YAAV,CAAuB,aAAa,SAAb,CAAvB;AACA,QAAQ,IAAR,GAAe,cAAf;AACA,QAAQ,KAAR,GAAgB,YAAhB","file":"models/bouncer_token.js","sourcesContent":["'use strict';\nvar mongoose = require('mongoose');\nvar ShortId = require('@hoist/mongoose-shortid');\nvar timestamps = require('mongoose-timestamp');\nvar BBPromise = require('bluebird');\nvar Schema = mongoose.Schema;\nvar environments = ['live', 'test', 'dev'];\nvar mongooseDelete = require('@hoist/mongoose-delete');\nvar keygen = require('keygenerator');\nvar BouncerTokenSchema = new Schema({\n  schemaVersion: String,\n  _id: {\n    type: ShortId,\n    base: 64,\n    retries: 4,\n    len: 20\n  },\n  application: {\n    type: ShortId,\n    ref: 'Application',\n    index: true,\n    required: 'bouncer tokens must belong to an application'\n  },\n  environment: {\n    type: String,\n    enum: {\n      values: environments,\n      message: 'bouncer tokens must belong to a valid environment'\n    },\n    required: 'bouncer tokens must belong to a valid environment'\n  },\n  saveTo: String,\n  saveId: String,\n  returnUrl: String,\n  connectorKey: String,\n  connectorType: String,\n  displayProperties: [\n    {\n       _id: false,\n      name: String, \n      value: String\n    }\n  ],\n  state: {\n    type: Schema.Types.Mixed,\n    default: function () {\n      return {};\n    }\n  },\n  key: {\n    type: String,\n    required: true,\n    default: function () {\n      return keygen._();\n    },\n    unique: true\n  }\n});\n\nBouncerTokenSchema.plugin(timestamps);\nBouncerTokenSchema.plugin(mongooseDelete);\nmongoose.model('BouncerToken', BouncerTokenSchema);\n\nvar BouncerToken = mongoose.model('BouncerToken');\nBBPromise.promisifyAll(BouncerToken);\nBBPromise.promisifyAll(BouncerToken.prototype);\nexports.name = 'BouncerToken';\nexports.model = BouncerToken;\n"],"sourceRoot":"/source/"}